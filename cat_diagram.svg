<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   width="800"
   height="500"
   version="1.1"
   id="svg25"
   sodipodi:docname="cat_diagram.svg"
   inkscape:version="1.4 (e7c3feb, 2024-10-09)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview25"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     showgrid="false"
     inkscape:zoom="1.3375"
     inkscape:cx="400.37383"
     inkscape:cy="250.09346"
     inkscape:window-width="1854"
     inkscape:window-height="1011"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1"
     inkscape:current-layer="flows" />
  <!-- Background -->
  <!-- Title -->
  <text
     x="400"
     y="30"
     font-family="Arial"
     font-size="20"
     font-weight="bold"
     text-anchor="middle"
     fill="#333"
     id="text1">Content Access Ticket Protocol Flow</text>
  <!-- Stakeholders -->
  <g
     id="user">
    <circle
       cx="100"
       cy="200"
       r="40"
       fill="#66b3ff"
       stroke="#3385ff"
       stroke-width="2"
       id="circle1" />
    <text
       x="100"
       y="205"
       font-family="Arial"
       font-size="14"
       font-weight="bold"
       text-anchor="middle"
       fill="#fff"
       id="text2">User</text>
    <text
       x="100"
       y="250"
       font-family="Arial"
       font-size="12"
       text-anchor="middle"
       fill="#333"
       id="text3">Reader/Consumer</text>
  </g>
  <g
     id="issuer">
    <rect
       x="260"
       y="160"
       width="120"
       height="80"
       rx="10"
       ry="10"
       fill="#99ff99"
       stroke="#66cc66"
       stroke-width="2"
       id="rect3" />
    <text
       x="320"
       y="195"
       font-family="Arial"
       font-size="14"
       font-weight="bold"
       text-anchor="middle"
       fill="#333"
       id="text4">Ticket Issuer</text>
    <text
       x="320"
       y="215"
       font-family="Arial"
       font-size="12"
       text-anchor="middle"
       fill="#333"
       id="text5">Sign &amp; Issue Tickets</text>
    <text
       x="320"
       y="230"
       font-family="Arial"
       font-size="12"
       text-anchor="middle"
       fill="#333"
       id="text6">Track Payments</text>
  </g>
  <g
     id="content">
    <rect
       x="520"
       y="160"
       width="120"
       height="80"
       rx="10"
       ry="10"
       fill="#ffcc80"
       stroke="#ffaa33"
       stroke-width="2"
       id="rect6" />
    <text
       x="580"
       y="195"
       font-family="Arial"
       font-size="14"
       font-weight="bold"
       text-anchor="middle"
       fill="#333"
       id="text7">Content Service</text>
    <text
       x="580"
       y="215"
       font-family="Arial"
       font-size="12"
       text-anchor="middle"
       fill="#333"
       id="text8">Verify Tickets</text>
    <text
       x="580"
       y="230"
       font-family="Arial"
       font-size="12"
       text-anchor="middle"
       fill="#333"
       id="text9">Serve Content</text>
  </g>
  <g
     id="royalty">
    <rect
       x="390"
       y="320"
       width="120"
       height="80"
       rx="10"
       ry="10"
       fill="#c2aeff"
       stroke="#9580ff"
       stroke-width="2"
       id="rect9" />
    <text
       x="450"
       y="355"
       font-family="Arial"
       font-size="14"
       font-weight="bold"
       text-anchor="middle"
       fill="#333"
       id="text10">Royalty</text>
    <text
       x="450"
       y="375"
       font-family="Arial"
       font-size="12"
       text-anchor="middle"
       fill="#333"
       id="text11">Aggregator</text>
    <text
       x="450"
       y="390"
       font-family="Arial"
       font-size="12"
       text-anchor="middle"
       fill="#333"
       id="text12">Distribute Payments</text>
  </g>
  <!-- Ticket Box -->
  <g
     id="ticket"
     transform="translate(-17.055129,-3.8110812)">
    <rect
       x="370"
       y="80"
       width="160"
       height="70"
       rx="5"
       ry="5"
       fill="#ffffff"
       stroke="#333333"
       stroke-width="1"
       stroke-dasharray="5, 2"
       id="rect12" />
    <text
       x="450"
       y="100"
       font-family="Arial"
       font-size="12px"
       font-weight="bold"
       text-anchor="middle"
       fill="#333333"
       id="text13">CAT Ticket</text>
    <text
       x="450"
       y="118"
       font-family="Arial"
       font-size="10px"
       text-anchor="middle"
       fill="#333333"
       id="text14">{&quot;resource&quot;: &quot;article/123&quot;,</text>
    <text
       x="450"
       y="133"
       font-family="Arial"
       font-size="10px"
       text-anchor="middle"
       fill="#333333"
       id="text15">&quot;exp&quot;: 1711181400, &quot;sig&quot;: &quot;...&quot;}</text>
  </g>
  <!-- Arrowhead Definition -->
  <defs
     id="defs15">
    <marker
       id="arrowhead"
       markerWidth="10"
       markerHeight="7"
       refX="10"
       refY="3.5"
       orient="auto">
      <polygon
         points="0 0, 10 3.5, 0 7"
         fill="#333"
         id="polygon15" />
    </marker>
    <marker
       id="arrowhead-6"
       markerWidth="10"
       markerHeight="7"
       refX="10"
       refY="3.5"
       orient="auto">
      <polygon
         points="10,3.5 0,7 0,0 "
         fill="#333333"
         id="polygon15-7" />
    </marker>
  </defs>
  <!-- Arrows and Flows -->
  <g
     id="flows"
     style="fill:none">
    <!-- User to Issuer -->
    <path
       d="M140,200 L260,200"
       stroke="#333"
       stroke-width="2"
       marker-end="url(#arrowhead)"
       id="path15"
       style="fill:none" />
    <text
       x="200"
       y="185"
       font-family="Arial"
       font-size="11"
       text-anchor="middle"
       fill="#333"
       id="text16"
       style="fill:none">1. Request + Pay</text>
    <!-- Issuer to User -->
    <path
       d="M260,220 L140,220"
       stroke="#333"
       stroke-width="2"
       marker-end="url(#arrowhead)"
       stroke-dasharray="5,2"
       id="path16"
       style="fill:none" />
    <text
       x="200"
       y="240"
       font-family="Arial"
       font-size="11"
       text-anchor="middle"
       fill="#333"
       id="text17"
       style="fill:none">2. Signed Ticket</text>
    <!-- User to Content -->
    <path
       d="M140,190 C300,100 360,100 520,190"
       stroke="#333"
       stroke-width="2"
       marker-end="url(#arrowhead)"
       id="path17"
       style="fill:none" />
    <text
       x="330"
       y="110"
       font-family="Arial"
       font-size="11"
       text-anchor="middle"
       fill="#333"
       id="text18"
       style="fill:none">3. Present Ticket</text>
    <!-- Content to User -->
    <path
       d="M 520,210 C 357.17452,301.71547 240.62932,347.57161 127.29873,229.23661"
       stroke="#333333"
       stroke-width="2"
       marker-end="url(#arrowhead)"
       stroke-dasharray="5, 2"
       id="path18"
       style="fill:none"
       sodipodi:nodetypes="cc" />
    <text
       x="330"
       y="300"
       font-family="Arial"
       font-size="11"
       text-anchor="middle"
       fill="#333"
       id="text19"
       style="fill:none">4. Return Content</text>
    <!-- Content to Royalty -->
    <text
       x="560"
       y="290"
       font-family="Arial"
       font-size="11"
       text-anchor="middle"
       fill="#333"
       id="text20"
       style="fill:none">5. Log Access</text>
    <!-- Royalty to Issuer -->
    <path
       d="m 319.99999,240 91.04377,80"
       stroke="#333333"
       stroke-width="2.66649"
       marker-end="url(#arrowhead)"
       stroke-dasharray="5, 2"
       id="path20"
       style="fill:none"
       sodipodi:nodetypes="cc" />
    <text
       x="320"
       y="290"
       font-family="Arial"
       font-size="11"
       text-anchor="middle"
       fill="#333"
       id="text21"
       style="fill:none">6. Distribute Royalties</text>
  </g>
  <!-- Legend -->
  <g
     id="legend">
    <rect
       x="576.07477"
       y="400"
       width="180"
       height="80"
       rx="5"
       ry="5"
       fill="#ffffff"
       stroke="#333333"
       stroke-width="1"
       id="rect21" />
    <text
       x="690"
       y="420"
       font-family="Arial"
       font-size="12"
       font-weight="bold"
       text-anchor="middle"
       fill="#333"
       id="text22">Legend</text>
    <line
       x1="600"
       y1="440"
       x2="630"
       y2="440"
       stroke="#333333"
       stroke-width="2"
       id="line22" />
    <text
       x="676.82245"
       y="445"
       font-family="Arial"
       font-size="11px"
       fill="#333333"
       id="text23">Data Flow</text>
    <line
       x1="600.74768"
       y1="460.74765"
       x2="630.74768"
       y2="460.74765"
       stroke="#333333"
       stroke-width="2"
       stroke-dasharray="5, 2"
       id="line23" />
    <text
       x="646.68225"
       y="462.75702"
       font-family="Arial"
       font-size="11px"
       fill="#333333"
       id="text24">Content/Value Flow</text>
    <rect
       x1="610"
       y1="470"
       width="15"
       height="15"
       rx="2"
       ry="2"
       fill="#fff"
       stroke="#333"
       stroke-width="1"
       stroke-dasharray="5,2"
       id="rect24" />
  </g>
  <path
     d="m 450,320 89.96921,-80"
     stroke="#333333"
     stroke-width="2.66649"
     marker-end="url(#arrowhead-6)"
     stroke-dasharray="5, 2"
     id="path20-5"
     style="fill:none;marker-end:url(#arrowhead-6)"
     sodipodi:nodetypes="cc" />
</svg>
